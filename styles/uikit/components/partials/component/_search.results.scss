/**
 * Search results.
 ============================================================================ */

.item-list--search-results {
  border-radius: $border-radius;
}

.view-header, .view__collection-count {
  font-weight: $font-weight-bold;
}

.search-results {
  @include output-rhythm(margin-bottom, $medium);
  @include output-rhythm(padding, $medium);

  // Style the empty message.
  &--empty h3 {
    @include adjust-font-size-to($large);
  }

  &__item {
    @include output-rhythm(margin-bottom, $large);
    padding: 0;
    list-style: none;
  }

  &__header {
    @include output-rhythm(margin, $large 0);
    @include output-rhythm(padding, $medium 0);
    border-top: $border-width $border-style;
    border-bottom: $border-width $border-style;

    ul, dl, dd {
      margin: 0;
      padding: 0;
    }

    form {
      margin-bottom: 0;
      display: flex;
      flex-wrap: wrap;
      justify-content: flex-start;
      align-items: center;

      > * {
        @include output-rhythm(margin, $xx-small $xx-large $xx-small 0);

        &:last-child {
          margin-right: 0;
        }
      }
    }

    .pagination_option_label__container > * {
      display: flex;

      .pagination_option_label {
        @include output-rhythm(padding-right, $xxx-small);
      }

      .pagination_option_item {
        @include output-rhythm(padding, 0 ($xx-small - $xxx-small));
      }
    }

    .display_selector__container > *:first-child {
      @include output-rhythm(padding-right, $xx-small);
    }

    .pager {
      text-align: left;

      ul {
        display: inline-block;
      }
    }

    @media #{$wide} {
      form {
        justify-content: flex-end;

        > * {
          @include output-rhythm(margin, $xx-small 0 $xx-small $xxx-large);

          &:first-child {
            margin-left: 0;
          }
        }
      }
    }
  }

  &__results {
    @media #{$wide} {
      display: grid;
      grid-gap: $global-padding-percent;
      grid-template-columns: 1fr 3fr;
    }
  }
}

.facets-widget-links {
  ul {
    padding-left: 0;
  }
}

.facet-item {
  list-style-type: none;

  a {
    display: flex;
  }

  &__value {
    max-width: 100%;
    overflow: hidden;
  }

  &__count {
    padding-left: 0.25em;
  }
}


// Individual search result.
.search-result {

  &__title {
    margin: 0;

    a {}
  }

  // We assume, like Google and co, that most results get picked based on the
  // title, not the snippet/description, so we make this smaller to enhance the
  // visibility of the titles.
  &__snippet-info {
    @include adjust-font-size-to($medium * .875); // 14px
  }

  &__snippet {}
  &__info {}

  // search-snippet & search-info both use p
  p {
    margin: 0;
  }
}

// Search views List/Grid
.view-list,
.view-grid {
  .node__details {
    .field, .node__title {
      margin-bottom: 0;
    }

    h2 {
      @include output-rhythm(margin-top, $large);

      a {
        text-decoration: none;

        &:hover, &:focus {
          text-decoration: underline;
        }
      }
    }
  }
}

.view-list {
  .node__content:not(.compound) {
    @include output-rhythm(padding, $x-large 0);

    .field-type-image__item {
      a {
        display: block;
        width: 100%;
      }
      img {
        width: 100%;
      }
    }
  }

  @media #{$tablet} {
    .node__content {
      display: flex;

      & >:first-child:not(:empty) {
        flex-shrink: 0;
        padding-right: $global-padding * 4;
      }

      .field-type-image__item {
        a {
          width: 13rem;
        }
      }
    }
  }
}

.view-grid .search-results__content {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(6.5rem, 1fr));
  @include output-rhythm(grid-gap, $xxx-large $large);
  height: fit-content;

  h2 {
    @include adjust-font-size-to($large);
  }

  .node__details .field:not(:first-child) {
    display: none;
  }

  .field-type-image__item {
    width: 100%;

    img {
      width: 100%;
    }
  }

  .view__collection-count {
    font-weight: normal;
    @include output-rhythm(margin-top, $small);
  }

  @media #{$tablet} {
    grid-template-columns: repeat(auto-fill, minmax(9rem, 1fr));
  }
}

// Homepage, Browse Content Teaser
.path-frontpage,
.path-browse-collections {
  .view-list .node__details {
    display: flex;
    flex-direction: column;
    @include output-rhythm(padding-bottom, $medium);

    > *:nth-child(2) {
      flex-grow: 1;
      @include output-rhythm(margin-bottom, $medium);
    }
  }
}

.path-browse-collections {
  .search-results__header .sort__container {
    display: none;
  }
}

// facets
.search-results__facets--mobile {
  summary {
    margin-bottom: 0;
    padding-left: 0;
    display: flex;
    justify-content: space-between;

    &:after {
      content: "+";
      float: right;
    }
  }

  &[open] {
    summary:after {
      content: "-";
    }
  }
}

.search-results__facets--wide {
  display: none;
}

@media #{$mobile-isolate} {
  .path-browse-collections {
    .view-grid .search-results__content {
      h2 {
        font-size: $base-font-size;
        line-height: $base-line-height;
      }
    }
  }
}

@media #{$tablet} {
  .path-frontpage,
  .path-browse-collections {
    .view-list {
      .node__content {
        display: flex;

        & >:first-child:not(:empty) {
          flex-shrink: 0;
          padding-right: $global-padding * 4;
        }

        .field-type-image__item {
          a {
            width: 18rem;
          }
        }
      }
    }
    .view-grid .search-results__content {
      grid-template-columns: repeat(auto-fill, minmax(19.75rem, 1fr));
    }
  }
}

@media #{$wide} {
  .path-frontpage,
  .path-browse-collections {
    .view-list {
      .node__content {
        .field-type-image__item {
          a {
            width: 23rem;
          }
        }
      }
    }
  }

  .search-results__facets--wide {
    display: block;
  }

  .search-results__facets--mobile {
    display: none;
  }
}

.view-footer {
  text-align: center;

  > * {
    display: inline-block;
  }
}
